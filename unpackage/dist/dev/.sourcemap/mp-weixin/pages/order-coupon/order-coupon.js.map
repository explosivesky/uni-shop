{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-coupon/order-coupon.vue?5b98","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-coupon/order-coupon.vue?1ee3","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-coupon/order-coupon.vue?24a4","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-coupon/order-coupon.vue?1c2d","uni-app:///pages/order-coupon/order-coupon.vue","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-coupon/order-coupon.vue?f842","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-coupon/order-coupon.vue?1e09"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iH,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACqC;;;AAGhG;AACiL;AACjL,gBAAgB,mLAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAkqB,CAAgB,opBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2CtrB;AACA,MADA,kBACA;AACA;AACA,iBADA;AAEA,mBAFA;AAGA;AACA;AACA,kBADA;AAEA,0BAFA;AAGA,yBAHA;AAIA,eAJA;AAKA,oBALA;AAMA,wBANA,EAMA;AACA;AACA,gBADA;AAEA,4BAFA;AAGA,gCAHA;AAIA,8BAJA;AAKA,uBALA;AAMA,oBANA;AAOA,sBAPA,EAOA;AACA,yBARA,EAQA;AACA,iBATA,CASA;AATA;AAWA;AACA,gBADA;AAEA,wBAFA;AAGA,gCAHA;AAIA,8BAJA;AAKA,uBALA;AAMA,oBANA;AAOA,uBAPA,EAOA;AACA,yBARA,EAQA;AACA,iBATA,CASA;AATA,SAXA,CAPA,EADA;;AA+BA;AACA,mBADA;AAEA,0BAFA;AAGA,sBAHA;AAIA,eAJA;AAKA,sBALA;AAMA,wBANA,EAMA;AACA,gBAPA,EA/BA,CAHA;;;;AA6CA,GA/CA;AAgDA;AACA,oBADA;AAEA,wBAFA;AAGA,kBAHA,EAhDA;;AAqDA,QArDA,kBAqDA,CArDA,EAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA5DA;AA6DA;AACA;AACA,WAFA,qBAEA;AACA;AACA,KAJA;AAKA;AACA,WANA,qBAMA;AACA;AACA,KARA;AASA;AACA,aAVA,uBAUA;AACA;AACA,KAZA,EA7DA;;AA2EA;AACA,UADA,oBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,gCAFA;AAGA,2CAHA;AAIA,uCAJA;AAKA,iCALA;AAMA,+BANA;AAOA,0BAPA,EAOA;AACA,iDARA,EAQA;AACA,+BATA,CASA;AATA;AAWA,SAdA;AAeA;AACA,OAlBA;AAmBA,KAxBA;AAyBA,YAzBA,oBAyBA,KAzBA,EAyBA;AACA;AACA;AACA;AACA;AACA;AACA,KA/BA;AAgCA;AACA,aAjCA,qBAiCA,IAjCA,EAiCA;AACA;AACA;AACA;AACA,6BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA,wFADA;AAEA,sBAFA;;AAIA;AACA;AACA,mBADA;AAEA,yBAFA;AAGA,uBAHA;;AAKA;AACA,gBADA;;AAGA,KAxDA,EA3EA,E;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAAo+B,CAAgB,66BAAG,EAAC,C;;;;;;;;;;;ACAx/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order-coupon/order-coupon.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order-coupon/order-coupon.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order-coupon.vue?vue&type=template&id=31566fb4&scoped=true&\"\nvar renderjs\nimport script from \"./order-coupon.vue?vue&type=script&lang=js&\"\nexport * from \"./order-coupon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order-coupon.vue?vue&type=style&index=0&id=31566fb4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31566fb4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order-coupon/order-coupon.vue\"\nexport default component.exports","export * from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-coupon.vue?vue&type=template&id=31566fb4&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-coupon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-coupon.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"d-flex flex-column\" style=\"height: 100%;\">\n\t\t<!-- 菜单栏 -->\n\t\t<view class=\"d-flex border-top text-light-muted p-0 m-0 position-fixed top-0 left-0 right-0\" style=\"height: 85rpx; z-index: 300; background-color: #ffffff;\">\n\t\t\t<text\n\t\t\t\tclass=\"flex-1 d-flex py-3 border-bottom a-center j-center\"\n\t\t\t\t@click=\"tabBarFn(index)\"\n\t\t\t\t:class=\"{ 'tab-active': index === tabIndex }\"\n\t\t\t\tv-for=\"(item, index) in tabBars\"\n\t\t\t\t:key=\"index\"\n\t\t\t>\n\t\t\t\t{{ item.name }}\n\t\t\t</text>\n\t\t</view>\n\t\t<view style=\"height: 85rpx;\"></view>\n\t\t<!-- 优惠券列表模块 -->\n\t\t<scroll-view scroll-y class=\"flex-1\" style=\"background-color: #f5f5f5 !important;\">\n\t\t\t<block v-for=\"(tabItem, tabI) in tabBars\" :key=\"tabI\">\n\t\t\t\t<view v-show=\"tabIndex === tabI\">\n\t\t\t\t\t<template v-if=\"tabItem.list.length > 0\">\n\t\t\t\t\t\t<view class=\"p-3\">\n\t\t\t\t\t\t\t<block v-for=\"(item, index) in tabItem.list\" :key=\"index\">\n\t\t\t\t\t\t\t\t<coupon :item=\"item\" :index=\"index\" @click.native=\"useCoupon(item)\">\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.disabled\">已使用</text>\n\t\t\t\t\t\t\t\t\t<text v-else>{{item.status ? '去使用' : validText}}</text>\n\t\t\t\t\t\t\t\t</coupon>\n\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</template>\n\t\t\t\t\t<!-- no-thing -->\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<no-thing :noThingImgSrc=\"tabItem.no_thing\" :noThingText=\"tabItem.msg\" />\n\t\t\t\t\t</template>\n\t\t\t\t</view>\n\t\t\t</block>\n\t\t</scroll-view>\n\t</view>\n</template>\n\n<script>\nimport orderList from '@/components/order/order-list.vue';\nimport noThing from '@/components/common/no-thing.vue';\nimport coupon from '@/components/order-coupon/coupon.vue';\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttabIndex: 0,\n\t\t\ttotalPrice:0,\n\t\t\ttabBars: [\n\t\t\t\t{\n\t\t\t\t\tname: '可用',\n\t\t\t\t\tno_thing: 'no_pay',\n\t\t\t\t\tmsg: '您还没有可用的优惠券',\n\t\t\t\t\tpage:1,\n\t\t\t\t\tkey:'valid',\n\t\t\t\t\tfirstLoad:false,//防止重复加载 false 没加载过 true 以加载\n\t\t\t\t\tlist: [{\n\t\t\t\t\t\tid:12,\n\t\t\t\t\t\ttitle:'5满0.05打5折',\n\t\t\t\t\t\tstart_time:1568478825,\n\t\t\t\t\t\tend_time:1578745662,\n\t\t\t\t\t\tprice:'5.00',\n\t\t\t\t\t\tdesc:'满减',\n\t\t\t\t\t\tstatus:true,//false 已失效\n\t\t\t\t\t\tdisabled:false,//true 已领取\n\t\t\t\t\t\ttype:0//0固定金额 1打折\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:13,\n\t\t\t\t\t\ttitle:'7折优惠券',\n\t\t\t\t\t\tstart_time:1568478825,\n\t\t\t\t\t\tend_time:1578745662,\n\t\t\t\t\t\tprice:'7.00',\n\t\t\t\t\t\tdesc:'折扣',\n\t\t\t\t\t\tstatus:false,//false 已失效\n\t\t\t\t\t\tdisabled:false,//true 已领取\n\t\t\t\t\t\ttype:1//0固定金额 1打折\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '已失效',\n\t\t\t\t\tno_thing: 'no_pay',\n\t\t\t\t\tmsg: '您还没有优惠券',\n\t\t\t\t\tpage:1,\n\t\t\t\t\tkey:'invalid',\n\t\t\t\t\tfirstLoad:false,//防止重复加载 false 没加载过 true 以加载\n\t\t\t\t\tlist: []\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tcomponents: {\n\t\tnoThing,\n\t\torderList,\n\t\tcoupon\n\t},\n\tonLoad(e) {\n\t\tlet totalPrice=0\n\t\tif(e.totalPrice){\n\t\t\ttotalPrice=JSON.parse(e.totalPrice)\n\t\t}\n\t\tthis.totalPrice = totalPrice\n\t\tthis.__init()\n\t},\n\tcomputed:{\n\t\t//获取分页\n\t\tgetPage(){\n\t\t\treturn this.tabBars[this.tabIndex].page\n\t\t},\n\t\t//是否可用\n\t\tisValid(){\n\t\t\treturn this.tabBars[this.tabIndex].key\n\t\t},\n\t\t//根据 tabbar 判断优惠券是 不可用 还是 已失效\n\t\tvalidText(){\n\t\t\treturn this.tabIndex === 0 ? '不可用' : '已失效'\n\t\t}\n\t},\n\tmethods: {\n\t\t__init(){\n\t\t\t//请求前保存索引\n\t\t\t//防止网速过慢时，用户切换tabindex\n\t\t\tlet index = this.tabIndex\n\t\t\tthis._api.get(`usercoupon/${this.getPage}/${this.isValid}`,{},{token:true}).then(res=>{\n\t\t\t\t// this.tabBars[index].list = res.map(v=>{\n\t\t\t\tthis.tabBars[index].list = res.map(v=>{\n\t\t\t\t\t//如果第一个 tab 栏中 使用条件不符合\n\t\t\t\t\tlet status = (index===0) && (v.min_price <= parseFloat(this.totalPrice))\n\t\t\t\t\treturn{\n\t\t\t\t\t\tid:v.coupon.id,\n\t\t\t\t\t\ttitle:v.coupon.name,\n\t\t\t\t\t\tstart_time:v.coupon.start_time,\n\t\t\t\t\t\tend_time:v.coupon.end_time,\n\t\t\t\t\t\tprice:v.coupon.value,\n\t\t\t\t\t\tdesc:v.coupon.desc,\n\t\t\t\t\t\tstatus,//false 已失效\n\t\t\t\t\t\tdisabled:v.used ===0 ? false : true,//true 已领取\n\t\t\t\t\t\ttype:v.coupon.type//0固定金额 1打折\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.tabBars[index].firstLoad=true\n\t\t\t})\n\t\t},\n\t\ttabBarFn(index) {\n\t\t\tthis.tabIndex = index;\n\t\t\t//还没加载\n\t\t\tif(!this.tabBars[index].firstLoad){\n\t\t\t\tthis.__init()\n\t\t\t}\n\t\t},\n\t\t//选择优惠券\n\t\tuseCoupon(item){\n\t\t\t//已使用\n\t\t\tif(item.disabled){\n\t\t\t\treturn uni.showToast({\n\t\t\t\t\ttitle: '该优惠券已经使用过了',\n\t\t\t\t\ticon:'none'\n\t\t\t\t});\n\t\t\t}\n\t\t\t//已失效/不可用\n\t\t\tif(!item.status){\n\t\t\t\treturn uni.showToast({\n\t\t\t\t\ttitle: `该优惠券已经${this.validText}了`,\n\t\t\t\t\ticon:'none'\n\t\t\t\t});\n\t\t\t}\n\t\t\tuni.$emit('useCoupon',{\n\t\t\t\t\tid:item.id,\n\t\t\t\t\tprice:item.price,\n\t\t\t\t\ttype:item.type\n\t\t\t})\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n.tab-active {\n\tcolor: #ff791a;\n\tborder-width: 2rpx;\n\tborder-color: #ff791a;\n}\n</style>\n","import mod from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-coupon.vue?vue&type=style&index=0&id=31566fb4&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-coupon.vue?vue&type=style&index=0&id=31566fb4&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1646015338448\n      var cssReload = require(\"D:/360安全浏览器下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}