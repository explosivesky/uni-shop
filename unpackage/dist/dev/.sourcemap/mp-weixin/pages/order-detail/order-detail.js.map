{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-detail/order-detail.vue?c9e8","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-detail/order-detail.vue?1614","webpack:///C:/Users/Administrator/Desktop/saomaApp/仿小米商城/pages/order-detail/order-detail.vue?00b1","uni-app:///pages/order-detail/order-detail.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iH,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;;;AAG3D;AACiL;AACjL,gBAAgB,mLAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAkqB,CAAgB,opBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuDtrB,qF;AACA,iB;AACA;AACA,MADA,kBACA;AACA;AACA,iBADA;AAEA,WAFA;AAGA,YAHA;AAIA;AACA,oBADA;AAEA,gBAFA;AAGA,oBAHA;AAIA,mBAJA;AAKA,iBALA;AAMA,gBANA;AAOA,iBAPA,EAJA;;AAaA,oBAbA;AAcA,gBAdA;AAeA,qBAfA;AAgBA,wBAhBA;AAiBA,oBAjBA;AAkBA,uBAlBA;AAmBA,qBAnBA;AAoBA,iBApBA;AAqBA,qBArBA;AAsBA,qBAtBA;AAuBA,iBAvBA;AAwBA,oBAxBA;AAyBA,wBAzBA;AA0BA,kBA1BA;AA2BA,iBA3BA;;AA6BA,GA/BA;AAgCA,QAhCA,kBAgCA,CAhCA,EAgCA;AACA;AACA;AACA,sBADA;AAEA,oBAFA;;AAIA;AACA,gBADA;;AAGA;AACA;AACA;AACA,GA5CA;AA6CA;AACA,oBADA;AAEA,gCAFA;AAGA,4BAHA;AAIA,cAJA;AAKA,8BALA,EA7CA;;AAoDA;AACA;AACA,QAFA,kBAEA;AACA,kBADA,CACA,QADA,iBACA,QADA,CACA,IADA,iBACA,IADA,CACA,QADA,iBACA,QADA,CACA,OADA,iBACA,OADA;AAEA;AACA,KALA;AAMA;AACA,UAPA,oBAOA;AACA;AACA,iCADA;AAEA,yCAFA;AAGA,qCAHA;;AAKA,KAbA;AAcA;AACA,gBAfA,0BAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAfA;;AAiBA;AACA;AACA;AACA;AACA,KAtCA;AAuCA;AACA,UAxCA,oBAwCA;AACA,+FADA;AAEA,gCAFA,CAEA,IAFA,yBAEA,IAFA,CAEA,KAFA,yBAEA,KAFA;AAGA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAhDA;AAiDA;AACA,SAlDA,mBAkDA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA,KAxDA,EApDA;;AA8GA;AACA;AACA,WAFA,qBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCADA;;AAGA;AACA,+DADA;AAEA,0BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,SAhBA,EAgBA,IAhBA;AAiBA;AACA,KAvBA;AAwBA,UAxBA,oBAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,oCAFA;AAGA,oCAHA;AAIA,2BAJA;AAKA,kCALA;AAMA,sBANA;;AAQA,SAfA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OApCA;AAqCA,KA/DA;AAgEA;AACA,eAjEA,yBAiEA;AACA;AACA;AACA;AACA,4EADA;;AAGA,KAvEA;AAwEA;AACA,cAzEA,wBAyEA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA,+BADA;AAEA,yBAFA;;AAIA;AACA;AACA;AACA,wBADA;;AAGA;AACA,6BADA;AAEA,4BAFA;;AAIA,aATA,EASA,KATA,CASA;AACA;AACA,aAXA;AAYA;AACA,SArBA;;AAuBA,KAjGA;AAkGA;AACA,eAnGA,yBAmGA;AACA;AACA;AACA;AACA,kFADA;;AAGA,KAzGA;AA0GA;AACA,iBA3GA,2BA2GA;AACA;AACA;AACA;AACA,0EADA;;AAGA,KAjHA;AAkHA;AACA,iBAnHA,2BAmHA;AACA;AACA,2CADA;;AAGA,KAvHA;AAwHA;AACA,YAzHA,sBAyHA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA,+BADA;AAEA,yBAFA;;AAIA;AACA;AACA;AACA,wBADA;;AAGA;AACA,+BADA;AAEA,4BAFA;;AAIA,aATA,EASA,KATA,CASA;AACA;AACA,aAXA;AAYA;AACA,SArBA;;AAuBA,KAjJA,EA9GA,E","file":"pages/order-detail/order-detail.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order-detail/order-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order-detail.vue?vue&type=template&id=d80893f4&\"\nvar renderjs\nimport script from \"./order-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./order-detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order-detail/order-detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-detail.vue?vue&type=template&id=d80893f4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\360安全浏览器下载\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order-detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"main-bg-color\" style=\"height: 100rpx;\"></view>\r\n\t\t<!-- 头部 -->\r\n\t\t<view class=\"main-bg-color d-flex j-sb a-center text-white px-3\" style=\"height: 230rpx;\">\r\n\t\t\t<view class=\"d-flex flex-column\">\r\n\t\t\t\t<text class=\"font-md\">{{ status }}</text>\r\n\t\t\t\t<text class=\"font-sm\">{{timeDownText}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"iconfont icon-daishouhuo\" style=\"font-size: 100rpx;\"></view>\r\n\t\t</view>\r\n\t\t<!-- 收货人信息 -->\r\n\t\t<view class=\"p-3 d-flex flex-column a-start j-sb font text-light-muted\">\r\n\t\t\t<view class=\"d-flex a-center\">\r\n\t\t\t\t<text class=\"font-md text-dark mr-2\">{{ address.name }}</text>\r\n\t\t\t\t<text>{{ address.phone }}</text>\r\n\t\t\t</view>\r\n\t\t\t<view>{{ path }}</view>\r\n\t\t</view>\r\n\t\t<divider />\r\n\t\t<!-- 订单列表 -->\r\n\t\t<view v-for=\"(order_items, order_index) in orderItems\"><order-list-item :order_items=\"order_items\" :order_index=\"order_index\" /></view>\r\n\t\t<divider />\r\n\t\t<uni-list-item title=\"商品总价\" titleColor=\"text-light-muted\" :rightText=\"'￥' + price\" rightTextColor=\"text-light-muted\" />\r\n\t\t<uni-list-item title=\"快递\" titleColor=\"text-light-muted\" rightText=\"包邮\" rightTextColor=\"text-light-muted\" />\r\n\t\t<uni-list-item title=\"优惠券\" titleColor=\"text-light-muted\" :rightText=\"coupon\" rightTextColor=\"text-light-muted\" />\r\n\t\t<uni-list-item title=\"实际付款\" titleColor=\"main-text-color\" :rightText=\"'￥' + price\" rightTextColor=\"main-text-color\" />\r\n\t\t<divider />\r\n\t\t<card headTitle=\"订单信息\" :showBorderBottom=\"false\" :showCover=\"false\"><uni-list-item title=\"订单编号\" :rightText=\"no\" rightTextColor=\"text-light-muted\" /></card>\r\n\t\t<!-- 底部其他按钮 -->\r\n\t\t<view style=\"height: 100rpx;\" v-if=\"status==='待支付' || status==='待发货' || status==='待收货'\"></view>\r\n\t\t<view class=\"position-fixed d-flex a-center j-end px-3 left-0 right-0 bottom-0\" v-if=\"status==='待支付' || status==='待发货' || status==='待收货'\" style=\"height: 100rpx; z-index: 1000; background-color: #f8f9fb;\">\r\n\t\t\t<template v-if=\"status==='待支付'\">\r\n\t\t\t\t<common-button @click=\"openPayment\">去支付</common-button>\r\n\t\t\t\t<common-button @click=\"closeOrder\">取消订单</common-button>\r\n\t\t\t</template>\r\n\t\t\t<template v-else-if=\"status==='待发货'\">\r\n\t\t\t\t<common-button>提醒发货</common-button>\r\n\t\t\t\t<common-button @click=\"applyRefund\">申请退款</common-button>\r\n\t\t\t</template>\r\n\t\t\t<template v-else-if=\"status==='待收货'\">\r\n\t\t\t\t<common-button @click=\"openLogistics\">查看物流</common-button>\r\n\t\t\t\t<common-button @click=\"received\">确认收货</common-button>\r\n\t\t\t</template>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport divider from '@/components/common/divider.vue';\r\nimport orderListItem from '@/components/order/order-list-item.vue';\r\nimport uniListItem from '@/components/uni-ui/uni-list-item/uni-list-item.vue';\r\nimport card from '@/components/common/card.vue';\r\nimport commonButton from '@/components/order/common-button.vue';\r\n\r\nimport $T from '@/common/time.js'\r\nvar timer = null\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\torder_id: 0,\r\n\t\t\tid: 0,\r\n\t\t\tno: '',\r\n\t\t\taddress: {\r\n\t\t\t\tprovince: '',\r\n\t\t\t\tcity: '',\r\n\t\t\t\tdistrict: '',\r\n\t\t\t\taddress: '',\r\n\t\t\t\tzip: null,\r\n\t\t\t\tname: '',\r\n\t\t\t\tphone: ''\r\n\t\t\t},\r\n\t\t\ttotal_price: 0,\r\n\t\t\tremark: '',\r\n\t\t\tpaid_time: null,\r\n\t\t\tpayment_method: '',\r\n\t\t\tpayment_no: '',\r\n\t\t\trefund_status: '',\r\n\t\t\tship_status: '',\r\n\t\t\textra: null,\r\n\t\t\tcreate_time: '',\r\n\t\t\tupdate_time: '',\r\n\t\t\treviewed: 0,\r\n\t\t\torderItems: [],\r\n\t\t\tcouponUserItem: [],\r\n\t\t\ttimeDown:'',\r\n\t\t\tend_time:0\r\n\t\t};\r\n\t},\r\n\tonLoad(e) {\r\n\t\tif (!e.id) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '订单不存在',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn uni.navigateBack({\r\n\t\t\t\tdelta: 1\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.order_id = e.id;\r\n\t\tthis.__init();\r\n\t},\r\n\tcomponents: {\r\n\t\tdivider,\r\n\t\torderListItem,\r\n\t\tuniListItem,\r\n\t\tcard,\r\n\t\tcommonButton\r\n\t},\r\n\tcomputed: {\r\n\t\t//拼接地址\r\n\t\tpath() {\r\n\t\t\tlet { province, city, district, address } = this.address;\r\n\t\t\treturn `${province} ${city} ${district} ${address}`;\r\n\t\t},\r\n\t\t//自动生成订单状态\r\n\t\tstatus() {\r\n\t\t\treturn this.$U.formatStatus({\r\n\t\t\t\tpaid_time: this.paid_time,\r\n\t\t\t\trefund_status: this.refund_status,\r\n\t\t\t\tship_status: this.ship_status\r\n\t\t\t});\r\n\t\t},\r\n\t\t//根据状态自动生成订单状态信息\r\n\t\ttimeDownText() {\r\n\t\t\tlet msg = '';\r\n\t\t\tswitch (this.status) {\r\n\t\t\t\tcase '待支付':\r\n\t\t\t\t\tmsg = '取消';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '待收货':\r\n\t\t\t\t\tmsg = '确认';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '待发货':\r\n\t\t\t\t\treturn '等待商家发货';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '退款中':\r\n\t\t\t\t\treturn '等待商家审核';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '已签收':\r\n\t\t\t\t\treturn '订单已签收';\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (msg !== '' && this.timeDown !== '') {\r\n\t\t\t\treturn `还差 ${this.timeDown} 自动${msg}`;\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t},\r\n\t\t// 实现优惠券功能\r\n\t\tcoupon(){\r\n\t\t\tif(Array.isArray(this.couponUserItem)&&this.couponUserItem.length===0)return '未使用'\r\n\t\t\tlet {type,value} = this.couponUserItem.coupon\r\n\t\t\tif(type===0){\r\n\t\t\t\treturn '-￥'+value\r\n\t\t\t}else{\r\n\t\t\t\treturn '打'+value+'折'\r\n\t\t\t}\r\n\t\t},\r\n\t\t//实际付款\r\n\t\tprice(){\r\n\t\t\tlet totalPrice = 0\r\n\t\t\tthis.orderItems.forEach(i=>{\r\n\t\t\t\ttotalPrice += i.pprice * i.num\r\n\t\t\t})\r\n\t\t\treturn totalPrice\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t//开启定时器\r\n\t\tgetDate(){\r\n\t\t\tif(this.status==='待支付'||this.status==='待收货'){\r\n\t\t\t\tif(timer)clearInterval(timer)\r\n\t\t\t\ttimer = setInterval(()=>{\r\n\t\t\t\t\tlet now = (new Date().getTime())/1000\r\n\t\t\t\t\t//未支付状态下 如果下单时间小于当前时间则自动取消订单\r\n\t\t\t\t\tif(this.end_time < (now)){\r\n\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\turl:'/pages/index/index'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: this.status === '待支付' ? '订单已关闭' : '订单已确认',\r\n\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.timeDown=''\r\n\t\t\t\t\t\treturn clearInterval(timer)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//生成倒计时\r\n\t\t\t\t\tthis.timeDown = $T.timeDown(this.end_time)\r\n\t\t\t\t},1000)\r\n\t\t\t}\r\n\t\t},\r\n\t\t__init() {\r\n\t\t\t//获取订单详情数据\r\n\t\t\tthis._api.get(`order/${this.order_id}`, {}, { token: true }).then(res => {\r\n\t\t\t\tlet orderItems = res.orderItems.map(o => {\r\n\t\t\t\t\tlet attrs = [];\r\n\t\t\t\t\tif (o.goodsItem.sku_type > 0 && o.goodsSkus && o.goodsSkus.skus) {\r\n\t\t\t\t\t\tfor (let key in o.goodsSkus.skus) {\r\n\t\t\t\t\t\t\tattrs.push(o.goodsSkus.skus[key].value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tgoods_id: o.goodsItem.id,\r\n\t\t\t\t\t\tcover: o.goodsItem.cover,\r\n\t\t\t\t\t\ttitle: o.goodsItem.title,\r\n\t\t\t\t\t\tpprice: o.price,\r\n\t\t\t\t\t\tattrs: attrs.join(','),\r\n\t\t\t\t\t\tnum: o.num\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t\tthis.id = res.id;\r\n\t\t\t\tthis.no = res.no;\r\n\t\t\t\tthis.address = res.address;\r\n\t\t\t\tthis.total_price = res.total_price;\r\n\t\t\t\tthis.remark = res.remark;\r\n\t\t\t\tthis.paid_time = res.paid_time;\r\n\t\t\t\tthis.payment_method = res.payment_method;\r\n\t\t\t\tthis.payment_no = res.payment_no;\r\n\t\t\t\tthis.refund_status = res.refund_status;\r\n\t\t\t\tthis.ship_status = res.ship_status;\r\n\t\t\t\tthis.extra = res.extra;\r\n\t\t\t\tthis.create_time = res.create_time;\r\n\t\t\t\tthis.update_time = res.update_time;\r\n\t\t\t\tthis.reviewed = res.reviewed;\r\n\t\t\t\tthis.orderItems = orderItems;\r\n\t\t\t\tthis.couponUserItem = res.couponUserItem;\r\n\t\t\t\tthis.end_time = res.end_time ? res.end_time : 0\r\n\t\t\t\t//开启定时器\r\n\t\t\t\tthis.getDate()\r\n\t\t\t});\r\n\t\t},\r\n\t\t//去支付\r\n\t\topenPayment(){\r\n\t\t\t//获取订单 id  和 总价格\r\n\t\t\tlet detail={id:this.id,totalPrice:this.price}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:\"/pages/pay-method/pay-method?detail=\"+JSON.stringify(detail)\r\n\t\t\t})\r\n\t\t},\r\n\t\t//取消订单\r\n\t\tcloseOrder(){\r\n\t\t\tuni.showModal({\r\n\t\t\t\tcontent: '是否取消订单?',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif(res.confirm){\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '取消订单中...',\r\n\t\t\t\t\t\t\tmask: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis._api.post(`closeorder/${this.id}`,{},{token:true}).then(res=>{\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\tdelta:1\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '取消成功',\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//申请退款\r\n\t\tapplyRefund(){\r\n\t\t\t//获取订单 id\r\n\t\t\tlet detail={id:this.id}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:\"/pages/order-refound/order-refound?detail=\"+JSON.stringify(detail)\r\n\t\t\t})\r\n\t\t},\r\n\t\t//查看物流\r\n\t\topenLogistics(){\r\n\t\t\t//获取订单 id\r\n\t\t\tlet detail={id:this.id}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:\"/pages/logistics/logistics?detail=\"+JSON.stringify(detail)\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 售后服务\r\n\t\topenAfterSale(){\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:\"/pages/after-sale/after-sale\"\r\n\t\t\t})\r\n\t\t},\r\n\t\t//确认收货\r\n\t\treceived(){\r\n\t\t\tuni.showModal({\r\n\t\t\t\tcontent: '是否确认收货?',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif(res.confirm){\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '确认收货中...',\r\n\t\t\t\t\t\t\tmask: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis._api.post(`order/${this.id}/received`,{},{token:true}).then(res=>{\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\tdelta:1\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '确认收货成功',\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style></style>\n"],"sourceRoot":""}